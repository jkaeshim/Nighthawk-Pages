<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Search by Actor</title>
</head>
<body>
    <h1>Movie Search by Actor</h1>
    
    <!-- Move the dropdown menu for genres below the actor name -->
    <input type="text" id="actorName" placeholder="Enter Actor's Name">
    <br> <!-- Add a line break for spacing -->
    <label for="genre">Select Genre:</label>
    <select id="genre">
        <option value="28">Action</option>
        <option value="35">Comedy</option>
        <option value="18">Drama</option>
        <!-- Add more genres as needed with their corresponding genre IDs -->
    </select>
    
    <button onclick="searchMovies()">Search</button>

    <h2>Results:</h2>
    <ul id="movieList"></ul>

    <script>
        function searchMovies() {
            const actorName = document.getElementById("actorName").value;
            const selectedGenre = document.getElementById("genre").value;
            const movieList = document.getElementById("movieList");
            movieList.innerHTML = ""; // Clear previous results

            // For all actors, you can use the API as before
            const apiKey = "bd74380ad0f3a6bc2db537543036493a";
            const apiUrl = `https://api.themoviedb.org/3/search/person?api_key=${apiKey}&query=${actorName}`;
            
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const actorId = data.results[0]?.id; // Assuming the first result is the desired actor
                    if (actorId) {
                        // Use the actor's ID to fetch movie credits
                        const movieUrl = `https://api.themoviedb.org/3/person/${actorId}/movie_credits?api_key=${apiKey}`;
                        
                        return fetch(movieUrl);
                    } else {
                        // Handle the case where the actor was not found
                        throw new Error("Actor not found.");
                    }
                })
                .then(response => response.json())
                .then(data => {
                    data.cast.forEach(movie => {
                        const movieTitle = movie.title;
                        const movieYear = movie.release_date ? movie.release_date.split("-")[0] : "N/A";
                        const movieRating = movie.vote_average; // Get movie rating
                        const moviePoster = `https://image.tmdb.org/t/p/w200${movie.poster_path}`; // Get movie poster URL

                        // Check if the selected genre is in the movie's genres
                        if (movie.genre_ids && movie.genre_ids.includes(parseInt(selectedGenre))) {
                            const listItem = document.createElement("li");
                            const posterImg = document.createElement("img"); // Create an img element for the poster
                            posterImg.src = moviePoster; // Set the src attribute to the poster URL
                            posterImg.alt = `${movieTitle} Poster`; // Set alt text for accessibility
                            listItem.appendChild(posterImg); // Append the poster to the list item
                            listItem.innerHTML += `${movieTitle} (${movieYear}) - Rating: ${movieRating}/10`; // Append movie title, year, and rating
                            movieList.appendChild(listItem);
                        }
                    });

                    if (movieList.children.length === 0) {
                        // If no movies match the selected genre, display a message
                        const noMoviesMessage = document.createElement("li");
                        noMoviesMessage.textContent = "No movies found for this actor and genre.";
                        movieList.appendChild(noMoviesMessage);
                    }
                })
                .catch(error => {
                    console.error("Error:", error);
                });
        }
    </script>
</body>
</html>
